<!DOCTYPE html>

<html>
  <head>
    <title>Web Socket Chat</title>
  </head>
  <body>
    <script>
      function appendTxtNode(msg) {
          var txtNode = document.createTextNode(msg);
          var brNode = document.createElement('br');
          var cnode = document.getElementById('content');
          cnode.appendChild(txtNode);
          cnode.appendChild(brNode);
      }

      var ws = new WebSocket("ws://127.0.0.1:8000/chat");
      ws.onopen = function(e) {
          appendTxtNode('opened WebSocket');
      };
      ws.onmessage = function(msg) {
          appendTxtNode(msg.data);
      };
      ws.onclose = function(e) {
          appendTxtNode('closed WebSocket');
      };
    </script>

    <h1>Web Socket Chat</h1>
    <input type="text" onChange="javascript:ws.send(this.value);this.value='';"/>
    <div id="content"></div>
  </body>
</html>
